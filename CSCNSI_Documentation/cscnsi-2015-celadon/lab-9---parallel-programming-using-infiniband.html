<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">

<!-- Mirrored from sites.google.com/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/lab-9---parallel-programming-using-infiniband by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Aug 2015 21:58:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var b=window,e="chrome",g="tick",h="wtsrt_",l="tbsd_",m="tbnd_",n="start",p="_wtsrt",q="_tbnd",r="CSI/index.html";(function(){function k(a){this.t={};this.tick=function(a,d,c){this.t[a]=[void 0!=c?c:(new Date).getTime(),d];if(void 0==c)try{b.console.timeStamp(r+a)}catch(f){}};this[g](n,null,a)}var a;b.performance&&(a=b.performance.timing);var t=a?new k(a.responseStart):new k;b.jstiming={Timer:k,load:t};if(a){var d=a.navigationStart,f=a.responseStart;0<d&&f>=d&&(b.jstiming.srt=f-d)}if(a){var c=b.jstiming.load;0<d&&f>=d&&(c[g](p,void 0,d),c[g](h,p,f),c[g](l,h))}try{a=null,b[e]&&b[e].csi&&(a=Math.floor(b[e].csi().pageT),
c&&0<d&&(c[g](q,void 0,b[e].csi().startE),c[g](m,q,d))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,c&&0<d&&(c[g](q,void 0,b.external.startE),c[g](m,q,d))),a&&(b.jstiming.pt=a)}catch(u){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="http://www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/7dadac/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d=window,e="length",h="",k="__duration__",l="function";function m(c){return document.getElementById(c)}d.byId=m;function n(c){return c.replace(/^\s+|\s+$/g,h)}d.trim=n;var p=[],q=0;d.JOT_addListener=function(c,a,b){var f=new String(q++);c={eventName:c,handler:a,compId:b,key:f};p.push(c);return f};d.JOT_removeListenerByKey=function(c){for(var a=0;a<p[e];a++)if(p[a].key==c){p.splice(a,1);break}};d.JOT_removeAllListenersForName=function(c){for(var a=0;a<p[e];a++)p[a].eventName==c&&p.splice(a,1)};
d.JOT_postEvent=function(c,a,b){var f={eventName:c,eventSrc:a||{},payload:b||{}};if(d.JOT_fullyLoaded)for(a=p[e],b=0;b<a&&b<p[e];b++){var g=p[b];g&&g.eventName==c&&(f.listenerCompId=g.compId||h,(g=typeof g.handler==l?g.handler:d[g.handler])&&g(f))}else d.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};d.JOT_delayedEvents=[];d.JOT_fullyLoaded=!1;
d.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var f=0;60<=b&&(b/=60,f=2);2<=b&&f++;return a?d.JOT_siteRelTimeStrs[f].replace(k,Math.floor(b)):d.JOT_userRelTimeStrs[f].replace(k,Math.floor(b))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/lab-9---parallel-programming-using-infiniband","deleted":false,"title":"Lab 9 - Parallel Programming using Infiniband","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/7dadac/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"enableAnalytics":false,"pageSharingId":"jotspot_page","enableUniversalAnalytics":false,"sharingPolicy":"OPENED_WITH_INDICATOR","siteTitle":"CSCNSI 2015: Team Celadon","isStartPageEnabled":true,"adsensePublisherId":null,"features":{"languageSelectDefaultTextSetToDefault":true,"moreMobileStyleImprovements":true,"accessibleSortingButtons":false,"driveImageLinkFromOnepick":true,"analyticsFullSamplingRate":true,"domainAnalyticsInGAOnly":true,"noCaptcha":true,"fileCabinetScreenReaderFix":true,"updatedTosAndPrivacyLinks":null,"pageDrafts":false,"mobileOrientationFix":true,"plusBadge":false,"pdfEmbedSupport":false,"jsClickFix":true},"isPublic":true,"isConsumer":false,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"onepickBaseUrl":"https://docs.google.com","domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://www.google.com/a/SelectSession?continue\u003dhttps://sites.google.com/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/lab-9---parallel-programming-using-infiniband\u0026service\u003djotspot","analyticsAccountId":"","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/7dadac/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/7dadac/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/7dadac/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/7dadac/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/7dadac/system/app/css/trogedit.css","_/rsrc/1438071434000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/7dadac/system/app/css/codeeditor.css","/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/_/rsrc/1438071434000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"probe.newmexicoconsortium.org","baseUri":"/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon","name":"cscnsi-2015-celadon","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":null,"parentWuid":null,"siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Lab 9 - Parallel Programming using Infiniband","locale":"en","wuid":"wuid:gx:34565d41611874e5","revision":19,"path":"/lab-9---parallel-programming-using-infiniband","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"lab-9---parallel-programming-using-infiniband","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Lab 9 - Parallel Programming using Infiniband - CSCNSI 2015: Team Celadon" />
<meta itemprop="name" content="Lab 9 - Parallel Programming using Infiniband - CSCNSI 2015: Team Celadon" />
<meta property="og:title" content="Lab 9 - Parallel Programming using Infiniband - CSCNSI 2015: Team Celadon" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/7dadac/system/app/themes/default/standard-css-default-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="_/rsrc/1438071434000/system/app/css/overlayf14d.css?cb=default150goog-ws-leftnone30themedefaultstandard" />
<link rel="stylesheet" type="text/css" href="_/rsrc/1438071434000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/a/probe.newmexicoconsortium.org/cscnsi%2d2015%2dceladon/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Lab 9 - Parallel Programming using Infiniband - CSCNSI 2015: Team Celadon</title>
<meta itemprop="image" content="https://www.google.com/a/cpanel/probe.newmexicoconsortium.org/images/logo.gif?service=google_default" />
<meta property="og:image" content="https://www.google.com/a/cpanel/probe.newmexicoconsortium.org/images/logo.gif?service=google_default" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><a href="index.html" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="https://www.google.com/a/cpanel/probe.newmexicoconsortium.org/images/logo.gif?service=google_default" alt="CSCNSI 2015: Team Celadon" class="sites-logo  sites-domain-logo" /></a><h2><a href="index.html" dir="ltr" id="sites-chrome-userheader-title">CSCNSI 2015: Team Celadon</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="https://sites.google.com/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList" class="has-expander"><li class="topLevel nav-first "><div dir="ltr" style="padding-left: 19px;"><a href="home.html" jotId="wuid:gx:1590c6ac6045a0b0" class="sites-navigation-link topLevel">Home</a></div></li><li class="topLevel parent " wuid="gx:371d7c2715521c48"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="ceph.html" jotId="wuid:gx:371d7c2715521c48" class="sites-navigation-link topLevel">Ceph (Version: Giant)</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/hardware-installation.html" jotId="wuid:gx:326e5d7390fa47fb" class="sites-navigation-link">1. Hardware Installation</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/sas-card-configuration.html" jotId="wuid:gx:6d03f1cf0b10bba9" class="sites-navigation-link">1.1 SAS Card Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/initial-head-node-configuration.html" jotId="wuid:gx:7bbee1415bee4fbb" class="sites-navigation-link">2. Initial Head Node Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/initial-ceph-node-configuration-for-all-ceph-cluster-nodes.html" jotId="wuid:gx:38b5475edbbeea62" class="sites-navigation-link">3. Initial Ceph Node Configuration for All Ceph Cluster Nodes</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/monitor-node-configuration.html" jotId="wuid:gx:2a465d2171da5aad" class="sites-navigation-link">4. Monitor Node Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/object-storage-node-configuration.html" jotId="wuid:gx:65ab326afe1d41c7" class="sites-navigation-link">5. Object Storage Node (OSD) Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/5-1-osd-removal.html" jotId="wuid:gx:1474b0afffe38d97" class="sites-navigation-link">5.1 OSD Removal</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/5-installing-the-rados-gateway.html" jotId="wuid:gx:57e379a9fc9ddc3d" class="sites-navigation-link">6. Installing the RADOS Gateway On CentOS 6.6/Rhel 6</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/5-1-configuring-the-rados-gateway.html" jotId="wuid:gx:518127316cb05ea3" class="sites-navigation-link">6.1 Configuring the RADOS Gateway CentOS 6.6/Rhel 6</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/ceph-benchmarking.html" jotId="wuid:gx:5c65f53e3aebe1fd" class="sites-navigation-link">7. Ceph Benchmarking</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/8-using-ceph.html" jotId="wuid:gx:3de85054be4e0c41" class="sites-navigation-link">8. Using Ceph</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="ceph/9-troubleshooting-ceph.html" jotId="wuid:gx:313f9662ef83c9e0" class="sites-navigation-link">9. Troubleshooting Ceph</a></div></li></ul></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="fail2ban.html" jotId="wuid:gx:203ee59e4c9db6b8" class="sites-navigation-link topLevel">fail2ban</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="lab-1---head-node-installation.html" jotId="wuid:gx:4e5af6535c8bbe65" class="sites-navigation-link topLevel">Lab 1 - Head Node Installation</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="lab-10---backup.html" jotId="wuid:gx:694e3f6d78f7aa4c" class="sites-navigation-link topLevel">Lab 10 - Documentation and Backup</a></div></li><li class="topLevel parent " wuid="gx:593a73a3009ab83a"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="lab-2---networking.html" jotId="wuid:gx:593a73a3009ab83a" class="sites-navigation-link topLevel">Lab 2 - Networking</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-2---networking/install-centos-on-client-node.html" jotId="wuid:gx:3d883ed594753ebc" class="sites-navigation-link">1. Install CentOS on Client Node</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-2---networking/ip-tables-configuration.html" jotId="wuid:gx:1963c5a322f53970" class="sites-navigation-link">2. IP Tables Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-2---networking/enable-net-forwarding-on-head-node.html" jotId="wuid:gx:71cf33af9d952777" class="sites-navigation-link">3. Enable Net Forwarding on Head Node</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-2---networking/secure-shell-ssh.html" jotId="wuid:gx:2daed54610f46864" class="sites-navigation-link">4. Secure Shell (SSH)</a></div></li></ul></li><li class="topLevel parent " wuid="gx:52c5f91cd6685fcc"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="lab-3---linux-system-services.html" jotId="wuid:gx:52c5f91cd6685fcc" class="sites-navigation-link topLevel">Lab 3 - Linux System Services</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-3---linux-system-services/child-node-configuration.html" jotId="wuid:gx:19b34dc584eb1c45" class="sites-navigation-link">Child node configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-3---linux-system-services/head-node-configuration.html" jotId="wuid:gx:35d2c8d07e43cd30" class="sites-navigation-link">Head node configuration</a></div></li></ul></li><li class="topLevel parent " wuid="gx:78626ce4f570f1c1"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="lab4---network-booting.html" jotId="wuid:gx:78626ce4f570f1c1" class="sites-navigation-link topLevel">Lab 4 - Network Booting</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab4---network-booting/trivial-file-transfer-protocol-tftp.html" jotId="wuid:gx:5a6b22b45cc155f0" class="sites-navigation-link">1. Trivial File Transfer Protocol (TFTP)</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab4---network-booting/anaconda-kickstart-script-configuration.html" jotId="wuid:gx:5116cd145728289e" class="sites-navigation-link">2. Anaconda Kickstart Script Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab4---network-booting/client-centos-install.html" jotId="wuid:gx:2b1cc44ae3f02021" class="sites-navigation-link">3. Client CentOS Install</a></div></li></ul></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="lab-5---lights-out-management.html" jotId="wuid:gx:5e6abb09a9f225f" class="sites-navigation-link topLevel">Lab 5 - Lights Out Management</a></div></li><li class="topLevel parent " wuid="gx:5227ef9981d74f69"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="lab5---cluster-monitoring.html" jotId="wuid:gx:5227ef9981d74f69" class="sites-navigation-link topLevel">Lab 6 - Cluster Monitoring</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab5---cluster-monitoring/head-node-configuratiion.html" jotId="wuid:gx:4dbad566977b9c3c" class="sites-navigation-link">1. Head Node Configuratiion</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab5---cluster-monitoring/client-node-configuration.html" jotId="wuid:gx:6fbfc429e0ae1ec1" class="sites-navigation-link">2. Client Node Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab5---cluster-monitoring/web-interface-configuration.html" jotId="wuid:gx:11b20ebd51b38092" class="sites-navigation-link">3. Web Interface Configuration</a></div></li></ul></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="lab-7---warewulf.html" jotId="wuid:gx:1e0906ab37a8a4e9" class="sites-navigation-link topLevel">Lab 7 - Warewulf</a></div></li><li class="topLevel parent " wuid="gx:54ed736817dba7e9"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="lab-8---lightweight-directory-access-protocol.html" jotId="wuid:gx:54ed736817dba7e9" class="sites-navigation-link topLevel">Lab 8 - Lightweight Directory Access Protocol</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-8---lightweight-directory-access-protocol/client-node-configuration.html" jotId="wuid:gx:323d319703a5953b" class="sites-navigation-link">Client Node Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-8---lightweight-directory-access-protocol/head-node-configuration.html" jotId="wuid:gx:74ebcc723daacc02" class="sites-navigation-link">Head Node Configuration</a></div></li></ul></li><li class="topLevel parent " wuid="gx:34565d41611874e5"><div class="current-bg" jotId="wuid:gx:34565d41611874e5" dir="ltr" style="padding-left: 0px;"><div class="expander"></div>Lab 9 - Parallel Programming using Infiniband</div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-9---parallel-programming-using-infiniband/child-node-configuration.html" jotId="wuid:gx:470a81302348ade" class="sites-navigation-link">Child Node Configuration</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="lab-9---parallel-programming-using-infiniband/head-node-configuration.html" jotId="wuid:gx:637eae83de89bcef" class="sites-navigation-link">Head Node Configuration</a></div></li></ul></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="system/app/pages/sitemap/hierarchy.html" jotId="wuid:gx:729713e8bbf69a36" class="sites-navigation-link topLevel">Sitemap</a></div></li></ul></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
</div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Lab 9 - Parallel Programming using Infiniband</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><b><div style="display:block;text-align:left"><b style="font-size:10pt;background-color:transparent">Description: </b><span style="font-size:10pt;font-weight:normal;background-color:transparent">In this lab we set up openmpi in order to run programs in parallel across Infiniband.  </span></div><div style="display:block;text-align:left"><br /></div></b><div><b>Installation:</b></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># yum groupinstall "Infiniband Support"</code></div><div><code># yum install infiniband-diags perftest qperf opensm openmpi openmpi-devel</code></div><div><code># chkconfig opensm on</code></div><div><code># chkconfig rdma on</code></div><div><code># service opensm start</code></div><div><code># service rdma start</code></div><div><code><br /></code></div><div><code># chroot /var/chroots/centos</code></div><div><div style="font-size:13.3333330154419px"><code># yum groupinstall "Infiniband Support"</code></div><div style="font-size:13.3333330154419px"><code># yum install infiniband-diags perftest qperf opensm openmpi<br /><div style="color:rgb(0,0,0);font-family:Arial,Verdana,sans-serif;font-size:13.3333330154419px;line-height:13.3333320617676px"><code># chkconfig opensm on</code></div><div style="color:rgb(0,0,0);font-family:Arial,Verdana,sans-serif;font-size:13.3333330154419px;line-height:13.3333320617676px"><code># chkconfig rdma on</code></div></code></div></div></div><div><b><br /></b></div><div><b>Configuration:</b></div><div>We need to ensure that the correct modules are loaded on boot for openmpi</div><div><br /></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># vi /etc/rc.modules</code></div><div></div></div><div><br /></div><div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>modprobe ipmi_si</code></div><div><code>modprobe ib_ipoib</code></div><div><code>#Hardware drivers</code></div><div><code>#Choose the appropriate modules from</code></div><div><code>#/lib/modules/&lt;kernel-version&gt;/updates/kernel/drivers/infiniband/hw</code></div><div><code>#</code></div><div><code>#mlx4_ib        #Mellanox ConnectX cards</code></div><div><code>#ib_mthca       #some mellanox cards</code></div><div><code>#iw_cxgb3       # Chelsio T3 cards</code></div><div><code>#iw_nes # NetEffect cards</code></div><div><code>#</code></div><div><code>#Protocol modules</code></div><div><code>#Common Modules</code></div><div><code>rdma_ucm</code></div><div><code>ib_umad</code></div><div><code>ib_uverbs</code></div><div><code>#IP over IB</code></div><div><code>ib_ipoib</code></div><div><code>#scsi over IB</code></div><div><code>ib_srp</code></div><div><code>#IB SDP protocol</code></div><div><code>ib_sdp</code></div></div></div><div><br /></div><div>We also need to ensure that the path to the binaries and libraries for openmpi are in our shell PATH.</div><div><br /></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># echo "</code><span style="font-size:10pt;background-color:transparent"><code>export PATH=$PATH:/usr/lib64/openmpi/bin" &gt;&gt;</code></span><span style="font-size:10pt;background-color:transparent"><code> /etc/bashrc</code></span></div>
<div><code># </code><span style="font-size:13.3333330154419px;background-color:transparent"><code>echo "</code></span><span style="font-size:10pt;background-color:transparent"><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib64/openmpi/lib"</code></span><span style="font-size:10pt;background-color:transparent"><code> &gt;&gt;</code></span><span style="font-size:10pt;background-color:transparent"><code> /etc/bashrc<br /># chroot /var/chroots/centos<br /></code></span><div style="font-size:13.3333330154419px;line-height:10.6666660308838px"><code># echo "</code><span style="font-size:10pt;background-color:transparent"><code>export PATH=$PATH:/usr/lib64/openmpi/bin" &gt;&gt;</code></span><span style="font-size:10pt;background-color:transparent"><code> /etc/bashrc</code></span></div><div style="font-size:13.3333330154419px;line-height:10.6666660308838px"><code># </code><span style="font-size:13.3333330154419px;background-color:transparent"><code>echo "</code></span><span style="font-size:10pt;background-color:transparent"><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib64/openmpi/lib"</code></span><span style="font-size:10pt;background-color:transparent"><code> &gt;&gt;</code></span><span style="font-size:10pt;background-color:transparent"><code> /etc/bashrc<br /># exit</code></span></div></div></div><div><b><br /></b></div><div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># /etc/bashrc</code></div><div><br /></div><div><code># System wide functions and aliases</code></div><div><code># Environment stuff goes in /etc/profile</code></div><div><br /></div><div><code># It's NOT a good idea to change this file unless you know what you</code></div><div><code># are doing. It's much better to create a custom.sh shell script in</code></div><div><code># /etc/profile.d/ to make custom changes to your environment, as this</code></div><div><code># will prevent the need for merging in future updates.</code></div><div><br /></div><div><code># are we an interactive shell?</code></div><div><code>if [ "$PS1" ]; then</code></div><div><code>  if [ -z "$PROMPT_COMMAND" ]; then</code></div><div><code>    case $TERM in</code></div><div><code>    xterm*)</code></div><div><code>        if [ -e /etc/sysconfig/bash-prompt-xterm ]; then</code></div><div><code>            PROMPT_COMMAND=/etc/sysconfig/bash-prompt-xterm</code></div><div><code>        else</code></div><div><code>            PROMPT_COMMAND='printf "\033]0;%s@%s:%s\007" "${USER}" "${HOSTNAME%%.*}" "${PWD/#$HOME/~}"'</code></div><div><code>        fi</code></div><div><code>        ;;</code></div><div><code>    screen)</code></div><div><code>        if [ -e /etc/sysconfig/bash-prompt-screen ]; then</code></div><div><code>            PROMPT_COMMAND=/etc/sysconfig/bash-prompt-screen</code></div><div><code>        else</code></div><div><code>            PROMPT_COMMAND='printf "\033]0;%s@%s:%s\033\\" "${USER}" "${HOSTNAME%%.*}" "${PWD/#$HOME/~}"'</code></div><div><code>        fi</code></div><div><code>        ;;</code></div><div><code>    *)</code></div><div><code>        [ -e /etc/sysconfig/bash-prompt-default ] &amp;&amp; PROMPT_COMMAND=/etc/sysconfig/bash-prompt-default</code></div><div><code>        ;;</code></div><div><code>      esac</code></div><div><code>  fi</code></div><div><code>  # Turn on checkwinsize</code></div><div><code>  shopt -s checkwinsize</code></div><div><code>  [ "$PS1" = "\\s-\\v\\\$ " ] &amp;&amp; PS1="[\u@\h \W]\\$ "</code></div><div><code>  # You might want to have e.g. tty in prompt (e.g. more virtual machines)</code></div><div><code>  # and console windows</code></div><div><code>  # If you want to do so, just add e.g.</code></div><div><code>  # if [ "$PS1" ]; then</code></div><div><code>  #   PS1="[\u@\h:\l \W]\\$ "</code></div><div><code>  # fi</code></div><div><code>  # to your custom modification shell script in /etc/profile.d/ directory</code></div><div><code>fi</code></div><div><br /></div><div><code>if ! shopt -q login_shell ; then # We're not a login shell</code></div><div><code>    # Need to redefine pathmunge, it get's undefined at the end of /etc/profile</code></div><div><code>    pathmunge () {</code></div><div><code>        case ":${PATH}:" in</code></div><div><code>            *:"$1":*)</code></div><div><code>                ;;</code></div><div><code>            *)</code></div><div><code>                if [ "$2" = "after" ] ; then</code></div><div><code>                    PATH=$PATH:$1</code></div><div><code>                else</code></div><div><code>                    PATH=$1:$PATH</code></div><div><code>                fi</code></div><div><code>        esac</code></div><div><code>    }</code></div><div><br /></div><div><code>    # By default, we want umask to get set. This sets it for non-login shell.</code></div><div><code>    # Current threshold for system reserved uid/gids is 200</code></div><div><code>    # You could check uidgid reservation validity in</code></div><div><code>    # /usr/share/doc/setup-*/uidgid file</code></div><div><code>    if [ $UID -gt 199 ] &amp;&amp; [ "`id -gn`" = "`id -un`" ]; then</code></div><div><code>       umask 002</code></div><div><code>    else</code></div><div><code>       umask 022</code></div><div><code>    fi</code></div><div><br /></div><div><code>    # Only display echos from profile.d scripts if we are no login shell</code></div><div><code>    # and interactive - otherwise just process them to set envvars</code></div><div><code>    for i in /etc/profile.d/*.sh; do</code></div><div><code>        if [ -r "$i" ]; then</code></div><div><code>            if [ "$PS1" ]; then</code></div><div><code>                . "$i"</code></div><div><code>            else</code></div><div><code>                . "$i" &gt;/dev/null 2&gt;&amp;1</code></div><div><code>            fi</code></div><div><code>        fi</code></div><div><code>    done</code></div><div><br /></div><div><code>    unset i</code></div><div><code>    unset pathmunge</code></div><div><code>fi</code></div><div><code># vim:ts=4:sw=4</code></div><div><code>export PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/nick/bin:/usr/lib64/openmpi/bin</code></div><div><code>export PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/nick/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin:/root/bin:/usr/lib64/openmpi/bin</code></div><div><code>export LD_LIBRARY_PATH=:/usr/lib64/openmpi/lib:/usr/lib64/openmpi/lib</code></div></div></div><div><br /></div><div><br /></div><div>Ensure that ib0 uses a static ip on the <u>head node:</u><br /><span style="font-size:10pt;background-color:transparent"><div class="sites-codeblock sites-codesnippet-block"><code># vi /etc/sysconfig/network-scripts/ifcfg-ib0</code></div></span></div><div><b><br /></b></div><div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>DEVICE=ib0</code></div><div><code>HWADDR=80:00:00:48:FE:80:00:00:00:00:00:00:00:02:C9:03:00:ED:10:E1</code></div><div><code>TYPE=InfiniBand</code></div><div><code>UUID=9a6e20be-161e-4867-805e-09bd4dc25811</code></div><div><code>ONBOOT=yes</code></div><div><code>NM_CONTROLLED=yes</code></div><div><code>BOOTPROTO=static</code></div><div><code>IPADDR=192.168.2.148</code></div><div><code>NETMASK=255.255.255.0</code></div></div></div><div><b><br /></b></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># ifdown ib0</code></div><div><code># ifup ib0</code></div></div><div><br /></div><div>Create a generic <u><i>/home/share/ifcfg-ib0</i></u> for the <u><i>child nodes.</i></u></div><div><br /></div><div><div class="sites-codeblock sites-codesnippet-block"><code># vi /home/share/ifcfg-ib0</code></div></div><div><br /></div><div>The file should have the following contents.</div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>DEVICE=ib0</code></div><div><code>BOOTPROTO=static</code></div><div><code>IPADDR=%{NETDEVS::IB0::IPADDR}</code></div><div><code>NETMASK=%{NETDEVS::IBO::NETMASK}</code></div><div><code>ONBOOT=yes</code></div><div></div></div><br /><div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left">Add <u style="font-style:italic">/home/share/ifcfg-ib0</u> to the warewulf database and each node's list of files, then set static ip's for each node:</div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left">**Edited netmask to 255.255.0.0 instead of 255.255.255.0** </div><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left"></div></div><div class="sites-codeblock sites-codesnippet-block"><div><div style="display:block;text-align:left"><code># </code><span style="font-size:10pt;background-color:transparent"><code>wwsh file import /home/share/ifcfg-ib0</code></span></div><div style="display:block;text-align:left"><span style="font-size:10pt;background-color:transparent"><code># </code></span><span style="font-size:10pt;background-color:transparent"><code>wwsh file set ifcfg-ib0</code></span><span style="font-size:10pt;background-color:transparent"><code>  </code></span><span style="font-size:10pt;background-color:transparent"><code>--path=/etc/sysconfig/network-scripts/ifcfg-ib0</code></span></div>
<div style="display:block;text-align:left"><code># wwsh</code></div><div style="display:block;text-align:left"><code>Warewulf&gt; provision set NODE-[01-10] --fileadd=ifcfg-ib0</code></div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="background-color:transparent"><code>node set NODE-01 --netdev=ib0 --ipaddr=192.168.2.1 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-02 --netdev=ib0 --ipaddr=192.168.2.2 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-03 --netdev=ib0 --ipaddr=192.168.2.3 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-04 --netdev=ib0 --ipaddr=192.168.2.4 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-05 --netdev=ib0 --ipaddr=192.168.2.5 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-06 --netdev=ib0 --ipaddr=192.168.2.6 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-07 --netdev=ib0 --ipaddr=192.168.2.7 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-08 --netdev=ib0 --ipaddr=192.168.2.8 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-09 --netdev=ib0 --ipaddr=192.168.2.9 --netmask=255.255.255.0</code></span></div><div><span style="font-size:13.3333330154419px"><code>Warewulf&gt; </code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>node set NODE-10 --netdev=ib0 --ipaddr=192.168.2.10 --netmask=255.255.255.0</code></span></div></div><div><br /></div><div><br /></div><div>Set the number of available threads for openmpi on the <i><u>head node.</u></i></div><div><br /></div><div><div class="sites-codeblock sites-codesnippet-block"><code># </code><span style="font-size:10pt;background-color:transparent"><code>vi /etc/openmpi-x86_64/openmpi-default-hostfile</code></span></div></div>
<div><b><br /></b></div><div>The contents of the file should look like this.</div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>NODE-00 slots=32</code></div><div><code>NODE-01-ib0 slots=24</code></div><div><div style="font-size:13.3333330154419px"><code>NODE-02-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-03-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-04-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-05-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-06-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-07-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-08-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-09-ib0 slots=24</code></div></div><div><div style="font-size:13.3333330154419px"><code>NODE-10-ib0 slots=24</code></div></div></div><div><b><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left"><u style="font-size:13.3333330154419px"><i>NOTE:</i></u><span style="font-size:13.3333330154419px;font-weight:normal"> </span><span style="font-size:13.3333330154419px;font-weight:normal">You shoud check /etc/hosts to ensure that these host names above correspond to the correct ip's for the ib0 interface.</span></div><br /></b></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># cp /etc/hosts /home/share/hosts</code></div><div><code># vi /home/share/hosts</code></div></div><div><br /></div><div><div style="display:block;text-align:left"><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>192.168.0.1             NODE-00</code></div><div><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</code></div><div><code>::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</code></div><div><code>192.168.2.148         NODE-00-ib0.cluster   NODE-00-ib0</code></div><div><code>## ALL ENTRIES BELOW THIS LINE WILL BE OVERWRITTEN BY WAREWULF ###                                                                                                                        </code></div><div><code>#                                                                                                                                                                                         </code></div><div><code># See provision.conf for configuration paramaters                                                                                                                                         </code></div><div><br /></div><div><br /></div><div><code># Node Entry for node: NODE-01.cluster (ID=20)                                                                                                                                            </code></div><div><code>192.168.0.2             NODE-01.cluster NODE-01 NODE-01-eth0.cluster NODE-01-eth0</code></div><div><code>192.168.2.1             NODE-01-ib0.cluster NODE-01-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-02.cluster (ID=11)                                                                                                                                            </code></div><div><code>192.168.0.3             NODE-02.cluster NODE-02 NODE-02-eth0.cluster NODE-02-eth0</code></div><div><code>192.168.2.2             NODE-02-ib0.cluster NODE-02-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-03.cluster (ID=12)                                                                                                                                            </code></div><div><code>192.168.0.4             NODE-03.cluster NODE-03 NODE-03-eth0.cluster NODE-03-eth0</code></div><div><code>192.168.2.3             NODE-03-ib0.cluster NODE-03-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-04.cluster (ID=13)                                                                                                                                            </code></div><div><code>192.168.0.5             NODE-04.cluster NODE-04 NODE-04-eth0.cluster NODE-04-eth0</code></div><div><code>192.168.2.4             NODE-04-ib0.cluster NODE-04-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-05.cluster (ID=14)                                                                                                                                            </code></div><div><code>192.168.0.6             NODE-05.cluster NODE-05 NODE-05-eth0.cluster NODE-05-eth0</code></div><div><code>192.168.2.5             NODE-05-ib0.cluster NODE-05-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-06.cluster (ID=15)                                                                                                                                            </code></div><div><code>192.168.0.7             NODE-06.cluster NODE-06 NODE-06-eth0.cluster NODE-06-eth0</code></div><div><code>192.168.2.6             NODE-06-ib0.cluster NODE-06-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-07.cluster (ID=16)                                                                                                                                            </code></div><div><code>192.168.0.8             NODE-07.cluster NODE-07 NODE-07-eth0.cluster NODE-07-eth0</code></div><div><code>192.168.2.7             NODE-07-ib0.cluster NODE-07-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-08.cluster (ID=17)                                                                                                                                            </code></div><div><code>192.168.0.9             NODE-08.cluster NODE-08 NODE-08-eth0.cluster NODE-08-eth0</code></div><div><code>192.168.2.8             NODE-08-ib0.cluster NODE-08-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-09.cluster (ID=18)                                                                                                                                            </code></div><div><code>192.168.0.10            NODE-09.cluster NODE-09 NODE-09-eth0.cluster NODE-09-eth0</code></div><div><code>192.168.2.9             NODE-09-ib0.cluster NODE-09-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-10.cluster (ID=19)                                                                                                                                            </code></div><div><code>192.168.0.11            NODE-10.cluster NODE-10 NODE-10-eth0.cluster NODE-10-eth0</code></div><div><code>192.168.2.10            NODE-10-ib0.cluster NODE-10-ib0</code></div><div><code>### ALL ENTRIES BELOW THIS LINE WILL BE OVERWRITTEN BY WAREWULF ###                                                                                                                       </code></div><div><code>#                                                                                                                                                                                         </code></div><div><code># See provision.conf for configuration paramaters                                                                                                                                         </code></div><div><br /></div><div><br /></div><div><code># Node Entry for node: NODE-01.cluster (ID=20)                                                                                                                                            </code></div><div><code>192.168.0.2             NODE-01.cluster NODE-01 NODE-01-eth0.cluster NODE-01-eth0</code></div><div><code>192.168.2.1             NODE-01-ib0.cluster NODE-01-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-02.cluster (ID=11)                                                                                                                                            </code></div><div><code>192.168.0.3             NODE-02.cluster NODE-02 NODE-02-eth0.cluster NODE-02-eth0</code></div><div><code>192.168.2.2             NODE-02-ib0.cluster NODE-02-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-03.cluster (ID=12)                                                                                                                                            </code></div><div><code>192.168.0.4             NODE-03.cluster NODE-03 NODE-03-eth0.cluster NODE-03-eth0</code></div><div><code>192.168.2.3             NODE-03-ib0.cluster NODE-03-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-04.cluster (ID=13)                                                                                                                                            </code></div><div><code>192.168.0.5             NODE-04.cluster NODE-04 NODE-04-eth0.cluster NODE-04-eth0</code></div><div><code>192.168.2.4             NODE-04-ib0.cluster NODE-04-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-05.cluster (ID=14)                                                                                                                                            </code></div><div><code>192.168.0.6             NODE-05.cluster NODE-05 NODE-05-eth0.cluster NODE-05-eth0</code></div><div><code>192.168.2.5             NODE-05-ib0.cluster NODE-05-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-06.cluster (ID=15)                                                                                                                                            </code></div><div><code>192.168.0.7             NODE-06.cluster NODE-06 NODE-06-eth0.cluster NODE-06-eth0</code></div><div><code>192.168.2.6             NODE-06-ib0.cluster NODE-06-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-07.cluster (ID=16)                                                                                                                                            </code></div><div><code>192.168.0.8             NODE-07.cluster NODE-07 NODE-07-eth0.cluster NODE-07-eth0</code></div><div><code>192.168.2.7             NODE-07-ib0.cluster NODE-07-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-08.cluster (ID=17)                                                                                                                                            </code></div><div><code>192.168.0.9             NODE-08.cluster NODE-08 NODE-08-eth0.cluster NODE-08-eth0</code></div><div><code>192.168.2.8             NODE-08-ib0.cluster NODE-08-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-09.cluster (ID=18)                                                                                                                                            </code></div><div><code>192.168.0.10            NODE-09.cluster NODE-09 NODE-09-eth0.cluster NODE-09-eth0</code></div><div><code>192.168.2.9             NODE-09-ib0.cluster NODE-09-ib0</code></div><div><br /></div><div><code># Node Entry for node: NODE-10.cluster (ID=19)                                                                                                                                            </code></div><div><code>192.168.0.11            NODE-10.cluster NODE-10 NODE-10-eth0.cluster NODE-10-eth0</code></div><div><code>192.168.2.10            NODE-10-ib0.cluster NODE-10-ib0</code></div></div><div><br /></div></div></div><div>vim /etc/sysconfig/iptables (add a line to allow openmpi to get through)</div><div>-A INPUT -i ib0 -j ACCECT</div><div><br /></div><div class="sites-codeblock sites-codesnippet-block"># wwsh file import /home/share/hosts</div><div class="sites-codeblock sites-codesnippet-block"># wwsh file set hosts --path=/etc/hosts</div><div class="sites-codeblock sites-codesnippet-block"># provision set NODE-[01-10] --fileadd=hosts</div><div><br /></div><div>We need to ensure that all the nodes can ssh between one another using key authentication.  Assuming Warewulf create keys during the initial configuration this can be accomplished by copying the private and public key from the head node to the chroot:</div><div><br /></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># cp ~/.ssh/cluster /var/chroots/centos/root/.ssh/</code></div><div><span style="font-size:13.3333330154419px"><code># cp ~/.ssh/cluster.pub /var/chroots/centos/</code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>root/.ssh/</code></span></div><div><span style="font-size:13.3333330154419px"><code># cp ~/.ssh/authorized_keys/var/chroots/centos/</code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>root/.ssh/</code></span></div><div><span style="font-size:13.3333330154419px"><code># cp ~/.ssh/config /var/chroots/centos/</code></span><span style="font-size:13.3333330154419px;background-color:transparent"><code>root/.ssh/</code></span></div></div><div><br /></div><div><u style="font-weight:bold;font-style:italic">NOTE:</u> Ensure the sshd does PermitRootLogin in <u style="font-style:italic">/etc/ssh/sshd_config</u> on the head and child nodes otherwise key authentication will not be used.</div><div><br /></div><div>Rebuild the warewulf image and reboot all of the child nodes.</div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># </code><span style="font-size:10pt;background-color:transparent"><code>wwvnfs --chroot /var/chroots/centos</code></span></div><div><span style="font-size:10pt;background-color:transparent"><code># </code></span><span style="font-size:10pt;background-color:transparent"><code>wwsh pxe update</code></span></div></div><div><span style="font-size:10pt;background-color:transparent"><br /></span></div>
<div>Create a simple C program to test openmpi.</div><div><br /></div><div><div class="sites-codeblock sites-codesnippet-block"><code># vi /root/hello.c</code></div></div><div><b><br /></b></div><div>The program can look something like this.</div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code>#include &lt;stdio.h&gt;</code></div><div><div style="font-size:13.3333330154419px"><code>#include &lt;mpi.h&gt;</code></div></div><div><br /></div><div><code>int main()</code></div><div><code>{</code></div><div><span><code>    printf("Hello world!\n");</code></span><br /></div><div><span><span><code>    return 0;</code></span><br /></span></div><div><span><span><code>}</code></span></span></div></div><div><span><span><br /></span></span></div><div></div><div>Now we can compile and run the C program using OpenMPI compile and run.</div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># </code><span style="font-size:10pt;background-color:transparent"><code>mpicc hello.c</code></span></div><div><span style="font-size:10pt;background-color:transparent"><code>#</code></span><span style="font-size:10pt;background-color:transparent"><code> </code></span><span style="font-size:10pt;background-color:transparent"><code>mpirun --allow-run-as-root a.out</code></span></div></div>
<div><b><br /></b></div><div><b>Extras:</b></div><div></div><div class="sites-codeblock sites-codesnippet-block"><div><code># yum install clustershell</code></div><div><code># vi /etc/clustershell/groups</code></div></div><div><br /></div><div>Change all: ... to all: NODE-[01-10]</div><div><b><br /></b></div><div><b><br /></b></div><div><b>Resources:</b></div><div><ul><li><span style="font-size:10pt;background-color:transparent">https://access.redhat.com/solutions/301643</span></li><li><span style="font-size:10pt;background-color:transparent">http://warewulf.lbl.gov/trac/wiki/Recipes/Infiniband</span></li><li><span style="font-size:10pt;background-color:transparent">Bossman Jr.</span></li><li><span style="font-size:10pt;background-color:transparent">Bossman </span></li><li><span style="font-size:10pt;background-color:transparent">Team Cerulean</span></li></ul></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages" class="sites-canvas-bottom-panel-wrapper" style="">
<div class="sites-subpages">
            Subpages <span id="subpages-total-number">(2):</span>
<span>
<a href="lab-9---parallel-programming-using-infiniband/child-node-configuration.html" dir="ltr">Child Node Configuration</a>
</span>
<span>
<a href="lab-9---parallel-programming-using-infiniband/head-node-configuration.html" dir="ltr">Head Node Configuration</a>
</span>
</div>
</div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=https://sites.google.com/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/lab-9---parallel-programming-using-infiniband">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/7dadac/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
      
          sites.core.Analytics.createTracker();
          sites.core.Analytics.trackPageview();
        
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Navigation", true);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXuzMtXyEUZP9EWx9i_l5CGpYY7mJEAJ2f1SPfeiQ6c4CPqX0rho1kWDEif03tBG-YiIFSFzaFZoEOMe1pFaQDv1OLU3tfIVp6OQ34XnGgiKk6L96OOWYG15iKSlbda1o2u_BOBS44Bjdxn9dzebRvgWxvmklmd53-eG2Jk22-8SsPYwRK0/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('_/tz.html', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>

<!-- Mirrored from sites.google.com/a/probe.newmexicoconsortium.org/cscnsi-2015-celadon/lab-9---parallel-programming-using-infiniband by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Aug 2015 21:58:19 GMT -->
</html>
